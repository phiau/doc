
2017-10-16(Monday) 17:30
    关键字：网络通信、序列化
    今天和客户端联调网络通信，序列化用的是 Protocol Buffer，客户端开发语言是 Lua，服务器是 Java。
    协议头部第一个是 short 类型表示长度的字段，服务器在解析的时候，这个读的跟客户端发上来的不一样，后来发现是大小端问题。
    服务器是大端，客户端是小端，大小端其实只是整数在内存结构中表示的顺序不一样。而我们的协议只是长度和协议 id 是原生的整数，其他的是 Protocol Buffer 序列化得到的字节流（而相信 Protocol Buffer 已经处理了不同平台的大小端问题），所以就服务器改了一下读取（写入）的时候用小端去读取，然后解决问题。