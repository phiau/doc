

2018.3.7

    UDP 服务器
    udp 是无连接的，所以之前一直就在想那服务器是怎么主动发送消息给客户端的，今天翻开《UNIX环境高级编程》第 16 章，关于 sendto 函数是这么描述的：
    对于面向连接的套接字，目标地址是可以忽略的的，因为目标地址蕴含在连接中。对于无连接的套接字，不能使用send，除非在调用connect时预先设定了目标地址，或者采用sendto来提供另一种发送报文方式。
    而 sendto 方法的声明为 
    sendto(int sockfd, const void *buf, size_t nbytes, int flags, const struct sockaddr *destaddr, socklen_t destlen)
    可以看到，发送接口中，有客户端的地址。所以服务器可以把客户端的地址存储起来（和某些信息进行映射，如用户id），当要主动发送给某个用户信息的时候，就可以根据索引得到客户端的地址，然后进行发送。不过因为是无连接的，所以不知道发送的结果是成功还是失败，所以就需要根据具体的需求来制定相应的措施。